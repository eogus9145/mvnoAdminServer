<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.telesoft.mvnogen.setup.auth_list">

	<sql id="auth_list">
		SELECT
		<!-- 
		   GRADE,
		   GRADE_NAME,
		   F_GET_ADMIN_INFO('ADMIN_NAME', ADMIN_ID) ADMIN_NM,
		   TO_CHAR(RECORD_DATE, 'YYYY-MM-DD') RECORD_DATE
		--> 
		<foreach collection="columns" item="col" separator=",">
			${col.id}
		</foreach>
		   
		FROM ADMIN_GRADE A
		WHERE 1=1	
		<choose>
			<when test="sword != '' and sword != null">
				<choose>
					<when test="sst == 'grade'">
					    AND GRADE LIKE '%' || #{sword} || '%'
					</when>
					<when test="sst == 'name'">
						AND GRADE_NAME LIKE '%' || #{sword} || '%'
					</when>
				</choose>
			</when>
		</choose>
		
		<if test="grade_name != '' and grade_name != null">
			AND GRADE_NAME LIKE '%' | #{grade_name} | '%'
		</if>
		
	</sql>
	
	<sql id="auth_list_add">
	<![CDATA[
	]]>
	</sql>
	
	<sql id="auth_list_add_excel">
	<![CDATA[
	]]>
	</sql>
	
	<select id="auth_list" parameterType="map" resultType="map">
	<![CDATA[
		SELECT
           fq.GRADE,
		   fq.GRADE_NAME,
		   fq.RECORD_DATE
	]]>
<!--		   fq.ADMIN_NM,-->
		<include refid="auth_list_add" />
	<![CDATA[
        FROM (
	]]>
		<include refid="auth_list" />
		ORDER BY A.RECORD_DATE DESC
		LIMIT #{endRowNum} OFFSET #{startRowNum}
	<![CDATA[
		) fq
	]]>
	</select>

	<select id="auth_list_tot_cnt" parameterType="map" resultType="int">
	<![CDATA[
		SELECT
            COUNT(1) CNT
        FROM (
	]]>
		<include refid="auth_list" />
	<![CDATA[
		) AA
	]]>
	</select>
</mapper>