<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="telecentro.org.admin_add_popup">
	
	<!-- 관리자 등록/수정시 권한등급을 얻어옴 -->
	<select id="admin_add_popup_grade" parameterType="map" resultType="egovMap">
		<![CDATA[
				SELECT GRADE, GRADE_NAME
				FROM ${db.mainschema}.ADMIN_GRADE
				ORDER BY GRADE_NAME ASC
		]]>
	</select>
	
	<!-- 관리자 등록시 아이디 체크 -->
	<select id="admin_add_popup_chk" parameterType="map" resultType="egovMap">
		<![CDATA[
				SELECT 'Y'
				FROM ${db.mainschema}.ADMIN
				WHERE ADMIN_ID = #{id}
		]]>
	</select>
	
	<!-- 관리자 수정시 정보조회 -->
	<select id="admin_add_popup_info" parameterType="map" resultType="egovMap">
		<![CDATA[
				SELECT 
						ADMIN_ID,
						AGENT_ID,
						ADMIN_NAME,
						ADMIN_TYPE,
						${db.mainschema}.F_GET_COMMON_CD_NM('ADMIN','ADMIN_TYPE', ADMIN_TYPE) ADMIN_TYPE_NM,
						STATUS,
						MOBILE MOBILE2,
						EMAIL NO_MASK_EMAIL,
						GRADE,
						ZIPCODE_H,
						ADDRESS_H_1,
						ADDRESS_H_2, 
						MEMO1, 
						MEMO2, 
						MEMO3
				 FROM ${db.mainschema}.ADMIN
				 where ADMIN_ID=#{no}
		]]>
	</select>
	
	<!-- 관리자 등록/수정 -->
	<select id="admin_add_popup_update" parameterType="map" resultType="egovMap" statementType="CALLABLE">
		CALL ${db.mainschema}.P_ADMIN(
		#{opCode,mode=IN,jdbcType=VARCHAR},
		#{adminId,mode=IN,jdbcType=VARCHAR},
		#{agentId,mode=IN,jdbcType=VARCHAR},
		#{status,mode=IN,jdbcType=VARCHAR},
		#{adminType,mode=IN,jdbcType=VARCHAR},
		#{adminName,mode=IN,jdbcType=VARCHAR},
		#{ENC_adminPw,mode=IN,jdbcType=VARCHAR},
		#{grade,mode=IN,jdbcType=VARCHAR},
		#{peopleId,mode=IN,jdbcType=VARCHAR},
		#{zipcodeH,mode=IN,jdbcType=VARCHAR},
		#{addressH1,mode=IN,jdbcType=VARCHAR},
		#{addressH2,mode=IN,jdbcType=VARCHAR},
		#{phone,mode=IN,jdbcType=VARCHAR},
		#{mobile,mode=IN,jdbcType=VARCHAR},
		#{email,mode=IN,jdbcType=VARCHAR},
		#{memo1,mode=IN,jdbcType=VARCHAR},
		#{memo2,mode=IN,jdbcType=VARCHAR},
		#{memo3,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_ID,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_LANG,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_IP,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_BROWSER,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_DB_SESSION,mode=IN,jdbcType=VARCHAR},
		#{o_ret_cd,mode=OUT,jdbcType=VARCHAR},
		#{o_ret_msg,mode=OUT,jdbcType=VARCHAR}
		)
	</select>
	
	<!-- 관리자 비밀번호 초기화 -->
	<select id="admin_add_popup_init" parameterType="map" resultType="egovMap" statementType="CALLABLE">
		CALL ${db.mainschema}.P_ADMIN_PASSWD(
		#{opCode,mode=IN,jdbcType=VARCHAR},
		#{passAdmin,mode=IN,jdbcType=VARCHAR},
		#{adminOldPw,mode=IN,jdbcType=VARCHAR},
		#{adminNewPw,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_ID,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_LANG,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_SERVER_NAME,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_IP,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_BROWSER,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_DB_SESSION,mode=IN,jdbcType=VARCHAR},
		#{o_ret_cd,mode=OUT,jdbcType=VARCHAR},
		#{o_ret_msg,mode=OUT,jdbcType=VARCHAR},
		#{o_data,mode=OUT,jdbcType=VARCHAR}
		)
	</select>
</mapper>