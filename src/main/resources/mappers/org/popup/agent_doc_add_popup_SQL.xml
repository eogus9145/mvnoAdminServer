<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="telecentro.org.agent_doc_add_popup">
	<select id="agent_doc_add_popup_list" parameterType="map" resultType="egovMap">
		SELECT 
			${db.mainschema}.F_GET_AGENT_INFO('AGENT_NAME', #{agent_id}) AGENT_NAME
	</select>
	
	<select id="agent_doc_add_popup_agent_check" parameterType="map" resultType="egovMap">
		SELECT 
			(CASE WHEN COUNT(*) = 0 THEN 'N' ELSE 'Y' END) IS_EXIST 
	  	FROM ${db.mainschema}.AGENT
	  	WHERE AGENT_ID = #{agent_id}
	</select>
	
	<!-- 유통망 이미지 등록/삭제 -->
	<select id="agent_doc_add_popup_update" parameterType="map" resultType="egovMap" statementType="CALLABLE">
		CALL ${db.mainschema}.P_AGENT_DOC(
		#{op_code,mode=IN,jdbcType=VARCHAR},
		#{agent_id,mode=IN,jdbcType=VARCHAR},
		#{seq,mode=IN,jdbcType=VARCHAR},
		#{doc_file,mode=IN,jdbcType=VARCHAR},
		#{del_rsn,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_ID,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_LANG,mode=IN,jdbcType=VARCHAR},	
		#{SESSION_ADM_IP,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_BROWSER,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_DB_SESSION,mode=IN,jdbcType=VARCHAR},
		#{o_ret_cd,mode=OUT,jdbcType=VARCHAR},
		#{o_ret_msg,mode=OUT,jdbcType=VARCHAR}
		)
	</select>
	
</mapper>