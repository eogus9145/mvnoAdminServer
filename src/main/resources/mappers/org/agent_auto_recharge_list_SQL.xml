<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="telecentro.org.agent_auto_recharge_list">
	<sql id="agent_auto_recharge_list">
	<![CDATA[
	
		SELECT /*+ INDEX_DESC(A CD_AGENT_RCG_AUTO_GRP_IDX1) */
		   	GRP_CD,
		   	GRP_NM,
		   	TO_CHAR(ENTER_DT, 'YYYY/MM/DD') ENTER_DT,
		   	REMARK,
		   	${db.mainschema}.F_GET_ADMIN_INFO('ADMIN_NAME', ADMIN_ID) ADMIN_NM
		   ]]>
		FROM ${db.mainschema}.CD_AGENT_RCG_AUTO_GRP A 
		WHERE ENTER_DT > TO_DATE('20150101', 'YYYYMMDD')
	
		<choose>
			<when test="sword != '' and sword != null">
				<choose>
					<when test="sst == 'grp_nm'">
						AND GRP_NM LIKE '%' || #{sword} || '%'
					</when>
					<otherwise>
						AND ${@telecentro.common.service.CommonUtil@get_dollar_replace_query(sst)} = #{sword}	
					</otherwise>
				</choose>
				
			</when>
		</choose>	  
		
	</sql>
	<sql id="agent_auto_recharge_list_add">
	<![CDATA[
	]]>
	</sql>
	<sql id="agent_auto_recharge_list_add_excel">
	<![CDATA[
	]]>
	</sql>
	<select id="agent_auto_recharge_list" parameterType="map"
		resultType="egovMap">
	<![CDATA[
		SELECT
          	fq.GRP_CD,
		   	fq.GRP_NM,
		   	fq.ENTER_DT,
		   	fq.REMARK,
		   	fq.ADMIN_NM
	]]>
		<include refid="agent_auto_recharge_list_add" />
	<![CDATA[
        FROM (
	]]>
		<include refid="agent_auto_recharge_list" />
		ORDER BY A.ENTER_DT DESC
		LIMIT #{endRowNum} OFFSET #{startRowNum}
	<![CDATA[
		) fq
	]]>
	</select>

	<select id="agent_auto_recharge_list_tot_cnt" parameterType="map"
		resultType="int">
	<![CDATA[
		SELECT
            COUNT(1) CNT
        FROM
            (
            ]]><include refid="agent_auto_recharge_list" /><![CDATA[
            )
	]]>
	</select>
	
</mapper>