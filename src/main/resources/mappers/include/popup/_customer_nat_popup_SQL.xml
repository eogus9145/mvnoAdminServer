<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="telecentro.include._customer_nat_popup">
	<select id="_customer_nat_popup" parameterType="map" resultType="egovMap">
		<if test="page_telco == 'LGT'">
			SELECT NAT_CD, LANG
			FROM ${db.mainschema}.CUSTOMER_LGT A, ${db.mainschema}.LGT_SUB B, ${db.mainschema}.LGT_CUS C
			WHERE A.SERVICE_ACCOUNT =  #{account}
			AND A.SERVICE_ACCOUNT = B.CONTRACT_NUM
			AND B.CUSTOMER_ID = C.CUSTOMER_ID
		</if>
		<if test="page_telco == 'SKT'">
			SELECT NAT_CD, LANG
			FROM CUSTOMER_SKT A, SKT_CUSTOMER B
			WHERE A.SERVICE_ACCOUNT =  #{account}
			AND A.SERVICE_ACCOUNT = B.SERVICE_ACCOUNT
		</if>
	</select>
	
	<select id="_customer_nat_popup_update" parameterType="map" resultType="egovMap" statementType="CALLABLE">
		CALL ${db.mainschema}.P_ADMIN_CUST_NAT_CD(
		#{page_telco,mode=IN,jdbcType=VARCHAR},
		#{i_service_account,mode=IN,jdbcType=VARCHAR},
		#{i_nat_cd,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_ID,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_LANG,mode=IN,jdbcType=VARCHAR},	
		#{SESSION_ADM_IP,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_BROWSER,mode=IN,jdbcType=VARCHAR},
		#{SESSION_ADM_DB_SESSION,mode=IN,jdbcType=VARCHAR},
		#{o_ret_cd,mode=OUT,jdbcType=VARCHAR},
		#{o_ret_msg,mode=OUT,jdbcType=VARCHAR}
		)
	</select>
	
</mapper>